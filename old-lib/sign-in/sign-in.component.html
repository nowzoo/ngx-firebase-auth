<div *ngIf="'wait'===screen" class="alert alert-light">
  <i class="fas fa-spinner fa-spin"></i> Please wait...
</div>
<div *ngIf="'success'===screen">
  <div class="alert alert-success">
      <i class="fas fa-check"></i>
      Welcome, {{cred.user.displayName}}!
      You&rsquo;re signed in.
  </div>
</div>
<div *ngIf="'error'===screen">
  <div class="alert alert-danger">
    <i class="fas fa-exclamation-triangle"></i>
    An unexpected error occurred.
    <br>
    Code: {{error.code}} | Message: {{error.message}}
  </div>
  <p class="text-muted">
    <a href="#" (click)="showForm(); $event.preventDefault()">Try Again</a>
  </p>
</div>
<div *ngIf="'form' === screen"> <!-- div *ngIf="'form' === screen" -->
  <form [formGroup]="fg"> <!-- form [formGroup]="fg" -->

    <div class="form-group"> <!-- div class="form-group" (email) -->
      <label [attr.for]="formId + 'email'">Email Address</label>
      <input
        [attr.id]="formId + 'email'"
        [attr.aria-describedby]="formId + 'email-help'"
        type="email"
        formControlName="email"
        placeholder="Email Address"
        class="form-control form-control-lg"
        [class.is-invalid]="showInvalid(emailFc)">
      <ngx-form-error [control]="emailFc" key="required">
        Required.
      </ngx-form-error>
      <ngx-form-error [control]="emailFc" key="email">
        Invalid email.
      </ngx-form-error>
      <ngx-form-error [control]="emailFc" key="auth/invalid-email">
        Invalid email.
      </ngx-form-error>
      <span class="form-text text-muted" [attr.id]="formId + 'email-help'">
        <span *ngIf="'fetched' === methodsFetchStatus">
          <span *ngIf="userExists">
            Account found for {{emailFc.value}}!
          </span>
          <span *ngIf="!userExists">
            No account found for {{emailFc.value}}.
            We&rsquo;ll create a new account.
          </span>
        </span>
        <span *ngIf="'fetched' !== methodsFetchStatus">
          To get started, enter your email address.
          If you don&rsquo;t have an account we&rsquo;ll create one for you.
        </span>
      </span>
    </div> <!-- div class="form-group" (email) -->

    <div *ngIf="'fetched' === methodsFetchStatus">
      <div *ngIf="userExists">
        <div class="card" *ngIf="userHasPassword">
          <div class="card-header">
            Sign In with Your Password
          </div>
          <div class="card-body">
            <ngx-firebase-auth-email-sign-in-form
              [email]="emailFc.value"
              (busy)="setChildFormBusy($event)"
              (success)="showSuccess($event)"
              (unhandledError)="showError($event)"></ngx-firebase-auth-email-sign-in-form>
          </div> <!-- div class="card-body" -->
        </div> <!-- class="card" *ngIf="userHasPassword" -->
        <div class="card" *ngIf="userOAuthMethods.length > 0">
          <div class="card-header">
            Sign In With Linked Account
          </div>
          <div class="card-body">
            <p *ngFor="let id of userOAuthMethods">
              <button type="button" name="btn btn-primary btn-lg btn-block" (click)="signInWithOAuth(id)">
                <i aria-hidden="true"
                  class="fab fa-fw"
                  [class.fa-twitter]="'twitter.com' === id"
                  [class.fa-facebook]="'facebook.com' === id"
                  [class.fa-github]="'github.com' === id"
                  [class.fa-google]="'google.com' === id"></i>
                {{providerNames[id]}}
              </button>
            </p>
          </div> <!-- div class="card-body" -->
        </div> <!-- class="card" *ngIf="userOAuthMethods.length > 0" -->
      </div> <!-- div *ngIf="userExists" -->

      <div *ngIf="! userExists">
        <div class="card" *ngIf="passwordSignUpEnabled">
          <div class="card-header">
            Create Account
          </div>
          <div class="card-body">
            <ngx-firebase-auth-email-sign-up-form
            [email]="emailFc.value"
            (busy)="setChildFormBusy($event)"
            (success)="showSuccess($event)"
            (unhandledError)="showError($event)"></ngx-firebase-auth-email-sign-up-form>
          </div>
        </div><!-- class="card" *ngIf="passwordSignUpEnabled" -->
        <div class="card" *ngIf="oAuthSignUpMethodsEnabled.length > 0">
          <div class="card-header">
            <span *ngIf="passwordSignUpEnabled">Or </span>
            Sign Up With...
          </div>
          <div class="card-body">
            <p *ngFor="let id of oAuthSignUpMethodsEnabled">
              <button type="button" name="btn btn-primary btn-lg btn-block" (click)="signInWithOAuth(id)">
                <i aria-hidden="true"
                  class="fab fa-fw"
                  [class.fa-twitter]="'twitter.com' === id"
                  [class.fa-facebook]="'facebook.com' === id"
                  [class.fa-github]="'github.com' === id"
                  [class.fa-google]="'google.com' === id"></i>
                {{providerNames[id]}}
              </button>
            </p>
          </div> <!-- div class="card-body" -->
        </div> <!-- class="card" *ngIf="oAuthSignUpMethodsEnabled.length > 0" -->
      </div> <!-- div *ngIf="! userExists" -->
    </div> <!-- *ngIf="'fetched' === methodsFetchStatus" -->
  </form>  <!-- form [formGroup]="fg" -->
</div> <!-- div *ngIf="'form' === screen" -->
